{"version":3,"file":"webpack-module.js","sourceRoot":"","sources":["../../webpack/core/webpack-module.ts"],"names":[],"mappings":";;AAEA,MAAM,wBAAwB,GAAG,OAAO,CAAC,6BAA6B,CAAC,CAAA;AAEvE,MAAa,aAAa;IAoDtB,YACY,IAAY;QAAZ,SAAI,GAAJ,IAAI,CAAQ;QApDxB,UAAK,GAAkB;YACnB;gBACI,IAAI,EAAE,QAAQ;gBACd,GAAG,EAAE,wBAAwB,CAAC,OAAO,CAAC;oBAClC,QAAQ,EAAE,cAAc;oBACxB,GAAG,EAAE,CAAC,YAAY,EAAE,gBAAgB,CAAC;iBACxC,CAAC;gBACF,OAAO,EAAE,IAAI,CAAC,IAAI;gBAClB,OAAO,EAAE,cAAc;aAC1B;YACD;gBACI,IAAI,EAAE,SAAS;gBACf,GAAG,EAAE,wBAAwB,CAAC,OAAO,CAAC;oBAClC,QAAQ,EAAE,cAAc;oBACxB,GAAG,EAAE,CAAC,YAAY,EAAE,gBAAgB,EAAE,aAAa,CAAC;iBACvD,CAAC;gBACF,OAAO,EAAE,IAAI,CAAC,IAAI;gBAClB,OAAO,EAAE,cAAc;aAC1B;YACD;gBACI,IAAI,EAAE,SAAS;gBACf,GAAG,EAAE,wBAAwB,CAAC,OAAO,CAAC;oBAClC,QAAQ,EAAE,cAAc;oBACxB,GAAG,EAAE,CAAC,YAAY,EAAE,gBAAgB,EAAE,aAAa,CAAC;iBACvD,CAAC;gBACF,OAAO,EAAE,IAAI,CAAC,IAAI;gBAClB,OAAO,EAAE,cAAc;aAC1B;YACD;gBACI,IAAI,EAAE,SAAS;gBACf,GAAG,EAAE;oBACD,MAAM,EAAE,cAAc;oBACtB,KAAK,EAAE;wBACH,OAAO,EAAE,CAAC,KAAK,EAAE,SAAS,CAAC;qBAC9B;iBACJ;aACJ;YACD;gBACI,IAAI,EAAE,0BAA0B;gBAChC,GAAG,EAAE;oBACD,MAAM,EAAE,YAAY;oBACpB,OAAO,EAAE;wBACL,UAAU,EAAE,qBAAqB;wBACjC,KAAK,EAAE,CAAC,GAAG,IAAI;qBAClB;iBACJ;aACJ;SACJ,CAAC;QAEF,aAAQ,GAA6B,IAAI,GAAG,EAAE,CAAC;IAI3C,CAAC;IAEL,GAAG;QACC,MAAM,KAAK,GAAkB,EAAE,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAChD,OAAO;YACH,KAAK,EAAE,KAAK;SACf,CAAA;IACL,CAAC;IAED,SAAS;QACL,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,EAAE;YACpB,IAAI,EAAE,SAAS;YACf,GAAG,EAAE;gBACD;oBACI,MAAM,EAAE,cAAc;oBACtB,OAAO,EAAE;wBACL,OAAO,EAAE,IAAI;qBAChB;iBACJ;gBACD,EAAE,MAAM,EAAE,WAAW,EAAE;aAC1B;SACJ,CAAC,CAAA;IACN,CAAC;CACJ;AA9ED,sCA8EC","sourcesContent":["import { BuilderContext } from '@angular-devkit/architect';\nimport { Module, RuleSetRule } from 'webpack';\nconst ExtractTextWebapckPlugin = require('extract-text-webpack-plugin')\nimport * as path from 'path';\nexport class WebpackModule {\n    rules: RuleSetRule[] = [\n        {\n            test: /\\.css$/,\n            use: ExtractTextWebapckPlugin.extract({\n                fallback: 'style-loader',\n                use: ['css-loader', 'postcss-loader']\n            }),\n            include: this.root,\n            exclude: /node_modules/\n        },\n        {\n            test: /\\.less$/,\n            use: ExtractTextWebapckPlugin.extract({\n                fallback: 'style-loader',\n                use: ['css-loader', 'postcss-loader', 'less-loader']\n            }),\n            include: this.root,\n            exclude: /node_modules/\n        },\n        {\n            test: /\\.scss$/,\n            use: ExtractTextWebapckPlugin.extract({\n                fallback: 'style-loader',\n                use: ['css-loader', 'postcss-loader', 'sass-loader']\n            }),\n            include: this.root,\n            exclude: /node_modules/\n        },\n        {\n            test: /\\.jsx?$/,\n            use: {\n                loader: 'babel-loader',\n                query: {\n                    presets: ['env', 'stage-0']\n                }\n            }\n        },\n        {\n            test: /\\.(png|jpg|jpeg|gif|svg)/,\n            use: {\n                loader: 'url-loader',\n                options: {\n                    outputPath: 'dist/public/images/', // 图片输出的路径\n                    limit: 1 * 1024\n                }\n            }\n        }\n    ];\n\n    rulesMap: Map<string, RuleSetRule> = new Map();\n\n    constructor(\n        private root: string\n    ) { }\n\n    get(): Module {\n        const rules: RuleSetRule[] = [];\n        this.rulesMap.forEach(rule => rules.push(rule));\n        return {\n            rules: rules\n        }\n    }\n\n    addTsRule() {\n        this.rulesMap.set('ts', {\n            test: /\\.tsx?$/,\n            use: [\n                {\n                    loader: 'babel-loader',\n                    options: {\n                        babelrc: true\n                    },\n                },\n                { loader: 'ts-loader' }\n            ]\n        })\n    }\n}\n"]}